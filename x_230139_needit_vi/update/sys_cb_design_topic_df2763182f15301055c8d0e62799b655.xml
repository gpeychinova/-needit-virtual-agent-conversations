<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="_PRVW__5327a3145d153010f86bd5cabe5e8e04">9727a3142f15301055c8d0e62799b605</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"c1952e8de5b94cfeb5c4cb294ec8c2be","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"c1952e8de5b94cfeb5c4cb294ec8c2be"}],"goals":[{"name":"primary","trigger_id":"c1952e8de5b94cfeb5c4cb294ec8c2be","nodes":[{"type":"StartGoal","goal_id":"822c55f1addd42dc88da0d28bcc7d719","greeting_msg":{"type":"String","mode":"string","value":"I can help you find and update NeedIt records for a type of request."},"id":"d352ea9c471c4a94a373a0221b702c97","name":"Start"},{"type":"TerminateGoal","goal_id":"822c55f1addd42dc88da0d28bcc7d719","confirmation_msg":{"type":"String","mode":"string","value":"Ask again when you need to update other NeedIt records."},"id":"b02bf980f6da42fab1b6652252cc32b6","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"17e28d6cf60b4373a3257eb073150f1c","name":"NeedIt Type","goal_id":"822c55f1addd42dc88da0d28bcc7d719","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"5c9a973e81fd4e2cb52fea456b57850f","message":{"type":"String","mode":"string","value":"Which type of NeedIt record would you like to view?"},"optional":false,"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false}},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n\t    // Return the display value (Label) for the needit_type choice\n\t    return 'You selected: ' + vaInputs.needit_type.getDisplayValue();\n\t})()\n"},"id":"8dd9273ac59e42e7b1a6319342a993f5","name":"Confirm NeedIt Type","goal_id":"822c55f1addd42dc88da0d28bcc7d719","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"df9655dcc76744a6a84bcd1249fab5df","name":"NeedIt List","goal_id":"822c55f1addd42dc88da0d28bcc7d719","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"2b75ffea39344d76aa5a86562edee79c","message":{"type":"String","mode":"string","value":"Select a NeedIt record to view."},"optional":false,"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"expression_mode":"script","script":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for. Order the results by the When needed value.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number, u_when_needed, and \t\t    // short_description values for the NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)\n","no_options_found_message":{"type":"String","mode":"string","value":"You have no open NeedIt records."},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for. Order the results by the When needed value.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number, u_when_needed, and \t\t    // short_description values for the NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)\n"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"2b75ffea39344d76aa5a86562edee79c","fields":["priority","short_description","u_when_needed"],"id":"4ebae72cd3b44c0d90480b2083a2041b","name":"NeedIt Card","goal_id":"822c55f1addd42dc88da0d28bcc7d719","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"","value":""}},{"type":"InputPrompt","variable_id":"9eea1d62d44e4f36ae75d4860711bddc","message":{"type":"String","mode":"string","value":"Would you like to view another NeedIt Record?"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"optional":false,"id":"7834c164b8214d9cbd06955c199701ef","name":"Search Again","goal_id":"822c55f1addd42dc88da0d28bcc7d719","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Find more NeedIt records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again="},"id":"439e54e23ec04e6a8f86bf020beaf42a","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"05baf039b1dc468f8d3651eaba98bdc2","name":"Yes"}],"id":"a2b811c892bc4b66a2a93b057a8c5f14","goal_id":"822c55f1addd42dc88da0d28bcc7d719"},{"type":"InputPrompt","variable_id":"3c334325727b42cf93e4a99b1f2075c5","message":{"type":"String","mode":"string","value":"When do you need the NeedIt completed?"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"optional":false,"id":"e9b139bd975548039b0cf1b911c33aea","name":"New When Needed Date","goal_id":"822c55f1addd42dc88da0d28bcc7d719","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"2b75ffea39344d76aa5a86562edee79c","id":"fffff904077944548ebf49d5925ee06c","name":"Change When Needed Date","goal_id":"822c55f1addd42dc88da0d28bcc7d719","applicability":{"type":"Applicability","mode":"query","value":"new_when_needed_dateISNOTEMPTY"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"2b75ffea39344d76aa5a86562edee79c","fields":["u_when_needed","short_description"],"id":"53cd8c79f067489b9de6ed5d2b1ae806","name":"Updated NeedId","goal_id":"822c55f1addd42dc88da0d28bcc7d719","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"","value":""}},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"37038e32cdcc475ea31db03f3b557921","name":"What To Update","goal_id":"822c55f1addd42dc88da0d28bcc7d719","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"ac2a76f403ce474ea2329feae36c5c99","message":{"type":"String","mode":"string","value":"What you want to update?"},"optional":false,"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false}},{"type":"Decision","name":"Update field","branches":[{"type":"Branch","label":"When needed","expression":{"type":"Applicability","mode":"query","value":"what_to_update=When needed"},"id":"2dc8685201fa4e37b68272a614f6f19f","name":"When needed"},{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":"what_to_update=Nothing"},"id":"127694d91ad64d34911c381eb1310042","name":"Nothing"},{"type":"Branch","label":"Short Description","expression":{"type":"Applicability","mode":"query","value":"what_to_update=Short Description"},"id":"3fecef217cf9471bb11f0b5fa8c02e17","name":"Short Description"}],"id":"9fed29585bda468a86cba02a6c095707","goal_id":"822c55f1addd42dc88da0d28bcc7d719"},{"type":"InputPrompt","variable_id":"879ea68c53054a77ba8db9d965e6e726","message":{"type":"String","mode":"string","value":"What is the new Short Description?"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"optional":false,"id":"59827a4831704b6db2a3fade492154b4","name":"New Short Description","goal_id":"822c55f1addd42dc88da0d28bcc7d719","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}}","variable_id":"2b75ffea39344d76aa5a86562edee79c","id":"d452f7f1d13e4ddba33385aacd4bc8a6","name":"Change Short Description","goal_id":"822c55f1addd42dc88da0d28bcc7d719","applicability":{"type":"Applicability","mode":"query","value":"new_short_descriptionISNOTEMPTY"}},{"type":"ScriptedAction","script":"(function execute() {\n\t    // Add 1 to the search_count variable\n\t    vaVars.search_count = vaVars.search_count + 1;\n\t})()\n","id":"fbd57c860e1e42f880b9c39314d05b20","name":"Update search_count","goal_id":"822c55f1addd42dc88da0d28bcc7d719","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"search_count value","branches":[{"type":"Branch","label":"Less than 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If the value of search_count is less than 3, return true\n\t    // otherwise, return false\n\t    if (vaVars.search_count &lt; 3)\n\t        return true;\n\t    else\n\t        return false;\n\t})()\n"},"id":"bbf1b1af3d2e410fab1612fa10f45e87","name":"Less than 3"},{"type":"Branch","label":"3 or more","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If the value of search_count is less than 3, return true\n\t    // otherwise, return false\n\t    if (vaVars.search_count &gt;= 3)\n\t        return true;\n\t    else\n\t        return false;\n\t})()"},"id":"77791ad615fb48ffa8e11002c9da8a57","name":"3 or more"}],"id":"30cdf945a4af47a5ba30816f276d6dc5","goal_id":"822c55f1addd42dc88da0d28bcc7d719"}],"edges":[{"type":"Edge","source_node_id":"d352ea9c471c4a94a373a0221b702c97","target_node_id":"17e28d6cf60b4373a3257eb073150f1c","id":"adbf73b4d48045ea8d46a90f78d27ddc"},{"type":"Edge","source_node_id":"17e28d6cf60b4373a3257eb073150f1c","target_node_id":"8dd9273ac59e42e7b1a6319342a993f5","id":"1eece84fc3c849109bb5892a9ca83cc2"},{"type":"Edge","source_node_id":"8dd9273ac59e42e7b1a6319342a993f5","target_node_id":"df9655dcc76744a6a84bcd1249fab5df","id":"04d3c8fa0b9c4a9690ae526e12575865"},{"type":"Edge","source_node_id":"df9655dcc76744a6a84bcd1249fab5df","target_node_id":"4ebae72cd3b44c0d90480b2083a2041b","id":"18c1dc579639483295113a27855e5462"},{"type":"Edge","source_node_id":"7834c164b8214d9cbd06955c199701ef","target_node_id":"a2b811c892bc4b66a2a93b057a8c5f14","id":"c3605dbd5d7745ca987ebab2df5abf25"},{"type":"Edge","source_node_id":"a2b811c892bc4b66a2a93b057a8c5f14","target_node_id":"b02bf980f6da42fab1b6652252cc32b6","branch_id":"439e54e23ec04e6a8f86bf020beaf42a","id":"6a1e8d21050a45e8a177d3a91a176ae9","name":"439e54e23ec04e6a8f86bf020beaf42a"},{"type":"Edge","source_node_id":"e9b139bd975548039b0cf1b911c33aea","target_node_id":"fffff904077944548ebf49d5925ee06c","id":"780039a9ee7f4aa3b3f296e131d43036"},{"type":"Edge","source_node_id":"fffff904077944548ebf49d5925ee06c","target_node_id":"53cd8c79f067489b9de6ed5d2b1ae806","id":"4e108663f0ef43bcade4ccf951d3f6ba"},{"type":"Edge","source_node_id":"53cd8c79f067489b9de6ed5d2b1ae806","target_node_id":"7834c164b8214d9cbd06955c199701ef","id":"9409738d6ca74076a9251e88cb3b6b8c"},{"type":"Edge","source_node_id":"4ebae72cd3b44c0d90480b2083a2041b","target_node_id":"37038e32cdcc475ea31db03f3b557921","id":"6d853071b63e49ad9f3527e60332f029"},{"type":"Edge","source_node_id":"37038e32cdcc475ea31db03f3b557921","target_node_id":"9fed29585bda468a86cba02a6c095707","id":"07b8510c1ece4fb9b599fc8771ee850c"},{"type":"Edge","source_node_id":"9fed29585bda468a86cba02a6c095707","target_node_id":"e9b139bd975548039b0cf1b911c33aea","branch_id":"2dc8685201fa4e37b68272a614f6f19f","id":"08dd96e4bf7c4cdbaa1a1b93f3bfe57e","name":"2dc8685201fa4e37b68272a614f6f19f"},{"type":"Edge","source_node_id":"9fed29585bda468a86cba02a6c095707","target_node_id":"7834c164b8214d9cbd06955c199701ef","branch_id":"127694d91ad64d34911c381eb1310042","id":"8705d3699f454c44b86037ef0cf0a67a","name":"127694d91ad64d34911c381eb1310042"},{"type":"Edge","source_node_id":"9fed29585bda468a86cba02a6c095707","target_node_id":"59827a4831704b6db2a3fade492154b4","branch_id":"3fecef217cf9471bb11f0b5fa8c02e17","id":"09ded624aac44d0f97f906df666dd92e","name":"3fecef217cf9471bb11f0b5fa8c02e17"},{"type":"Edge","source_node_id":"59827a4831704b6db2a3fade492154b4","target_node_id":"d452f7f1d13e4ddba33385aacd4bc8a6","id":"cf801ef79b154e1c804562c91a78a692"},{"type":"Edge","source_node_id":"d452f7f1d13e4ddba33385aacd4bc8a6","target_node_id":"53cd8c79f067489b9de6ed5d2b1ae806","id":"3ff74479032a44239fa14e572ff508aa"},{"type":"Edge","source_node_id":"a2b811c892bc4b66a2a93b057a8c5f14","target_node_id":"fbd57c860e1e42f880b9c39314d05b20","branch_id":"05baf039b1dc468f8d3651eaba98bdc2","id":"f122c747bfaa42e6a5f56744d0b6aa21","name":"05baf039b1dc468f8d3651eaba98bdc2"},{"type":"Edge","source_node_id":"fbd57c860e1e42f880b9c39314d05b20","target_node_id":"30cdf945a4af47a5ba30816f276d6dc5","id":"ac07b40cd004484e9d13ee948131701f"},{"type":"Edge","source_node_id":"30cdf945a4af47a5ba30816f276d6dc5","target_node_id":"17e28d6cf60b4373a3257eb073150f1c","branch_id":"bbf1b1af3d2e410fab1612fa10f45e87","id":"d6be1cbff4d14000b5ca63b6d2a47428","name":"bbf1b1af3d2e410fab1612fa10f45e87"},{"type":"Edge","source_node_id":"30cdf945a4af47a5ba30816f276d6dc5","target_node_id":"b02bf980f6da42fab1b6652252cc32b6","branch_id":"77791ad615fb48ffa8e11002c9da8a57","id":"d8638082505b4b4f9a81a19887509509","name":"77791ad615fb48ffa8e11002c9da8a57"}],"id":"822c55f1addd42dc88da0d28bcc7d719"}],"script_variables":[{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"id":"0dc60df6d24d4412b745b50c8d7778cc"}],"glide_variables":[{"type":"Reference","table":"sys_user","id":"current-user","name":"user"},{"type":"Choice","choices":[{"name":"Legal_","element":"legal"},{"name":"Facilities_","element":"facilities"},{"name":"Human Resources_","element":"human resources"}],"id":"5c9a973e81fd4e2cb52fea456b57850f","name":"needit_type"},{"type":"Reference","table":"x_58872_needit_needit","id":"2b75ffea39344d76aa5a86562edee79c","name":"needit_list"},{"type":"True/False","id":"9eea1d62d44e4f36ae75d4860711bddc","name":"search_again"},{"type":"Date/Time","mode":"date_time","id":"3c334325727b42cf93e4a99b1f2075c5","name":"new_when_needed_date"},{"type":"Reference","table":"x_58872_needit_needit","id":"e694561961a04ea8bfbbb4f66b81614d","name":"change_when_needed_date"},{"type":"Choice","choices":[{"name":"Short Description","element":"Short Description"},{"name":"When needed","element":"When needed"},{"name":"Nothing","element":"Nothing"}],"id":"ac2a76f403ce474ea2329feae36c5c99","name":"what_to_update"},{"type":"String","name":"new_short_description","id":"879ea68c53054a77ba8db9d965e6e726"},{"type":"Reference","table":"x_58872_needit_needit","id":"6ed0d42a686d47d9ab763a0c58dc273e","name":"change_short_description"}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"f7989ac02fd5301055c8d0e62799b6d9","domain":"global","id":"619a92c42fd5301055c8d0e62799b6ee","name":"_PRVW__5327a3145d153010f86bd5cabe5e8e04","key_phrases":["Update NeedIt Records","Needit Request","needit update"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"design_category":"d9995a842fd5301055c8d0e62799b6a5","library":false}</design_definition>
        <design_topic_id>619a92c42fd5301055c8d0e62799b6ee</design_topic_id>
        <name>_PRVW__5327a3145d153010f86bd5cabe5e8e04</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-07-08 14:18:55</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>df2763182f15301055c8d0e62799b655</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_230139_needit_vi">f7989ac02fd5301055c8d0e62799b6d9</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">f7989ac02fd5301055c8d0e62799b6d9</sys_scope>
        <sys_update_name>sys_cb_design_topic_df2763182f15301055c8d0e62799b655</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-07-08 14:18:55</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
